---
permalink: /:basename
title: Demos
---

<!doctype html>

<html>
	<head>
		<title>Cade Conradson - {{ page.title }}</title>
		<link rel="shortcut icon" type="image/jpg" href="{{ site.url }}/assets/images/snakeface.jpg">
		<link rel="stylesheet" type="text/css" href="{{ site.url }}/assets/css/main.css">
		<link rel="stylesheet" type="text/css" href="{{ site.url }}/assets/css/column.css">
		<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
	</head>
	
	<body>
		<div id="wrap">
		
			<div id="header">
				<h3 class='site-title'>{{ site.title }}</h3>
				<p class='page-title'>{{ page.title }}</p>
			</div>
			
			<div class="nav">
				<a href="{{ site.url }}">Home</a>
				<a href="{{ site.url }}/projects/">Projects</a>
				<a href="{{ site.url }}/interests/">For Fun</a>
				<a href="{{ site.url }}/about/">About</a>
			</div>
			
			<div class = "body">
				<div id="visual">
					<script type="text/javascript">
					var counts = {{ site.data.leaguecounts | jsonify }};
					var placeHistory = {{ site.data.placeHistory | jsonify }};
					var proportion = false;
					var allTiers = false;
					var player = "tracer";
					var seasonRange = [1,41];
					
					//debug
					var pHist = [];
					var tiers = [];
					var seasons = [];
					var fCounts = [];
						
					function makePlot() {
						//var pHist = [];
						//var tiers = [];
						//var seasons = [];
						//var fCounts = [];
						
						//data slicing
						//isolate records for relevant player
						for (let i = 0; i < placeHistory.length; i++) {
							if ((placeHistory[i].player == player) && (placeHistory[i].season >= seasonRange[0]) && (placeHistory[i].season <= seasonRange[1])) {
								pHist.push(placeHistory[i]);
								seasons.push(placeHistory[i].season);
								tiers.push(placeHistory[i].tier);
							}
						}

						//find missing seasons and insert nulls
						var toadd = [];
						for (let s = seasons[0]; s < seasons[seasons.length-1]; s++) {
							if (!(seasons.includes(String(s)))) {
								pHist.push({"player":player, "tier":null, "division":null, "place":null, "season":String(s), "countPlacement":null, "propPlacement":null, "champ":null});
								toadd.push(String(s));
							}
						}
						pHist.sort(function(a,b){return a.season - b.season});
						seasons = seasons.concat(toadd).sort(function(a,b){return a - b});
						//seasons = ["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41"];
						
						//find needed tiers
						if (allTiers) {
							tiers = ["A","B","C","D","E","F","G","H","I","J"];
						} else {
							let potTiers = ["A","B","C","D","E","F","G","H","I","J"];
							let minTier = tiers.sort()[tiers.length - 1]
							let tempTiers = [];
							for (let i = 0; i < potTiers.length; i++) {
								if (potTiers[i] <= minTier) {tempTiers.push(potTiers[i]);} else {break;}
							}
							tiers = tempTiers;
						}
						
						var colors = ["#FF00FF","#9900FF","#0000FF","#4A85E8","#00FFFF","#00FF00","#FFFF00","#FF9800","#FF0000","#980000"];
						//cut colors because layers with same encoding annoyingly union their domains
						colors = colors.slice(0,tiers.length).concat(["#000000", "#000000", "#FFFF00"]);
						
						//filter counts to desired 
						if (allTiers) {
							for (let i = 0; i < counts.length; i++) {
								if (seasons.includes(counts[i].season)) {fCounts.push(counts[i]);}
							}
						} else {
							for (let i = 0; i < counts.length; i++) {
								if (seasons.includes(counts[i].season) && tiers.includes(counts[i].tier)) {fCounts.push(counts[i]);}
							}
						}
						
						const spec = {
							"title": "League History:" + player,
							"height": 600,
							"width" : 800,
							"layer": [
								{
									"data": {"values": fCounts},
									"mark": "bar",
									"encoding": {
										"x": {
											"field": "season",
											"type": "ordinal",
											"scale": {
												"domain": seasons
											},
											"axis": {"title": "Season"}
										},
										"y": {
											"field": "players",
											"type": "quantitative",
											"scale": {
												"reverse": true,
												"domain": null
											},
											"axis": {"title": "Position"}
										},
										"color": {
											"field": "tier",
											"type": "nominal",
											"scale": {
												"domain": tiers,
												"range": colors
											},
											"legend": {
												"title": "Tier",
												"values": tiers,
												"symbolType": "square",
												"symbolStrokeWidth": 0,
												"symbolSize": 200
											}
										},
										"order": {"field":"tier", "sort":"ascending"}
									}
								},
								{
									"data": {"values": pHist},
									"mark": {"type": "line", "stroke": "#000000"},
									"encoding" : {
										"x": {
										"field": "season",
										"scale": {
												"domain": seasons
											},
										},
										"y": {"field": "countPlacement", "type": "quantitative"}
									}
								},
								{
									"data": {"values": pHist},
									"transform": [{"calculate": "'http://dominionleague.org/past_standings/season' + datum.season", "as": "standings"}],
									"selection": {"point": {"type": "single", "on": "mouseover", "empty": "none"}},
									"mark": {
										"type": "point",
										"filled": true,
										"opacity": "1",
										"stroke": "#000000",
										"strokeWidth": "1"
									},
									"encoding": {
										"x": {
											"field": "season",
											"scale": {
												"domain": seasons
											},
										},
										"y": {"field": "countPlacement", "type": "quantitative"},
										"color": {
											"field": "champ",
											"type": "nominal",
											"scale": {
												"domain": ["no", "division", "league"]
											}
										},
										"shape": {
											"field": "champ",
											"type": "nominal",
											"scale": {
												"domain": ["no", "division", "league"],
												"range": [
													"M 0 -1 A 1 1 0 1 1 0 1 A 1 1 0 1 1 0 -1", 
													"M 0 -2 L -0.36327126400268 -0.5 L -1.90211303259031 -0.618033988749895 L -0.587785252292473 0.190983005625053 L -1.17557050458495 1.61803398874989 L -7.56848349501309e-17 0.618033988749895 L 1.17557050458495 1.6180339887499 L 0.587785252292473 0.190983005625053 L 1.90211303259031 -0.618033988749894 L 0.363271264002681 -0.5 L 4.89842541528951e-16 -2 L -0.36327126400268 -0.5",
													"M 0 -2.4 L -0.435925516803217 -0.6 L -2.28253563910837 -0.741640786499874 L -0.705342302750968 0.229179606750063 L -1.41068460550194 1.94164078649987 L -9.0821801940157e-17 0.741640786499874 L 1.41068460550194 1.94164078649987 L 0.705342302750968 0.229179606750063 L 2.28253563910837 -0.741640786499873 L 0.435925516803217 -0.6 L 5.87811049834741e-16 -2.4 L -0.435925516803216 -0.600000000000001"
												]
											},
											"legend": null
										},
										"href": {"field": "standings", "type": "nominal"},
										"size": {"condition": {"selection": "point", "value": "60"}, "value": "40"},
										"tooltip": [
											{"field": "season", "type": "nominal", "title": "Season"},
											{"field": "division", "type": "nominal", "title": "Division"},
											{"field": "place", "type": "nominal", "title": "Finish"}
										]
									}
								}
							]
										
						};
						vegaEmbed("#visual", spec);
					}
					
					makePlot();
					</script>
				</div>
			</div>
		
		</div>
	</body>
</html>